<!DOCTYPE html><!--  Last Published: Tue Jul 02 2024 23:16:40 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="6499ed855e43cb8f14f13d8d" data-wf-site="64233eb40608547f9d6368d5" lang="de">
<head>
  <meta charset="utf-8">
  <title>Mandatieren</title>
  <meta content="Ihrer erstklassigen Online-Plattform, die Ihnen ermöglicht, massgeschneiderte Versicherungsmandate unkompliziert und transparent zu verwalten" name="description">
  <meta content="Mandatieren" property="og:title">
  <meta content="Ihrer erstklassigen Online-Plattform, die Ihnen ermöglicht, massgeschneiderte Versicherungsmandate unkompliziert und transparent zu verwalten" property="og:description">
  <meta content="https://uploads-ssl.webflow.com/64233eb40608547f9d6368d5/645fad0e8897146b228287ab_125760007%20Raul%20Tito.png" property="og:image">
  <meta content="Mandatieren" property="twitter:title">
  <meta content="Ihrer erstklassigen Online-Plattform, die Ihnen ermöglicht, massgeschneiderte Versicherungsmandate unkompliziert und transparent zu verwalten" property="twitter:description">
  <meta content="https://uploads-ssl.webflow.com/64233eb40608547f9d6368d5/645fad0e8897146b228287ab_125760007%20Raul%20Tito.png" property="twitter:image">
  <meta property="og:type" content="website">
  <meta content="summary_large_image" name="twitter:card">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="hphYoo_5I8byIn7KGFl0517707wDBPFwjhcv20sS1tc" name="google-site-verification">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/cardea.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic","Nunito:regular,700"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
  <link href="https://cardea-insurance.com/mandat" rel="canonical">
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-GF7RJNKMTN"></script>
  <script type="text/javascript">window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('set', 'developer_id.dZGVlNj', true);gtag('config', 'G-GF7RJNKMTN');</script>
  <script type="text/javascript">!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.agent='plwebflow';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');fbq('init', '317888321044377');fbq('track', 'PageView');</script>
  <meta charset="UTF-8">
  <style>
.dropdown-content {
  display: none; /* by default, hide the dropdown */
  /* any other styles you want to apply to the dropdown */
}
.dropdown-content.show {
  display: block; /* when .show is added, display the dropdown */
}
    body, p, h1, h2, h3, h4, h5, h6, span, div, a, li, ul, ol, input, button {
        font-family: 'TT Norms', sans-serif;
        font-feature-settings: 'liga' off; /* Disable standard ligatures */
        -webkit-font-feature-settings: 'liga' off; /* Safari */
    }
.floating-label-group {
    position: relative;
    margin-bottom: 20px;
}
.floating-label-group input {
    font-size: 16px;
    padding: 20px 10px 10px 15px; /* Adjusted padding */
    display: block;
    width: 100%;
    border: 1px solid lightgray;
    border-radius: 30px; /* Rounded borders */
    box-sizing: border-box; /* Ensures padding doesn't increase size */
    height: 50px;
    text-indent: 0px; /* Adjusted text starting position */
    margin-bottom: -10px;
}
.floating-label-group label {
    color: #5264AE;
    font-size: 16px;
    font-weight: normal;
    position: absolute;
    pointer-events: none;
    left: 15px; /* Increased left spacing for the label */
    top: 16px; /* Adjusted for initial position within the input */
    transition: 0.2s ease all;
    background-color: white; /* Background to cover input border */
    padding: 0 4px; /* Padding for label's background */
}
.floating-label-group select {
    font-size: 16px;
    padding: 10px 15px; /* Adjusted padding */
    display: block;
    width: 100%;
    border: 1px solid lightgray;
    border-radius: 30px;
    box-sizing: border-box;
    height: 50px;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-color: white;
    font-family: 'Nunito', sans-serif;
    color: #5264AE;
    background-image: url('data:image/svg+xml;utf8,<svg fill="%235264AE" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
    background-position: right 2px center;
    background-repeat: no-repeat;
    background-size: 16px 16px;
}
.floating-label-group input:focus ~ .floating-label,
.floating-label-group input:not(:placeholder-shown) ~ .floating-label {
    top: 3px; /* Position above the input field */
    font-size: 12px;
    color: #5264AE;
    font-weight:bold;
    font-family: 'Nunito', sans-serif; /* Apply Nunito font here */
}
.floating-label-group input:focus {
    outline: none;
    border: 1px solid #262445; /* Highlighted border when focused */
}
.floating-label-group select:focus {
    outline: none;
    border: 1px solid #262445; /* Highlighted border when focused */
}
.input-group {
  display: flex;
}
/* Styles for the country code select container */
.country-code-select-container {
  flex: 1;
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
  margin-right: -1px;
}
.country-code-select-container select {
  width: 100%;
  border-radius: 30px;
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}
/* Styles for the phone number input container */
.phone-number-input-container {
  flex: 5;
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}
.phone-number-input-container input {
  width: 100%;
  border-radius: 30px;
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}
  .wg-li {
  display: none;
  }
</style>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0">
  <style>
  .button-footer {
    text-align: left;
    display: flex;
    align-items: center;
    padding-top: 6px;
    padding-bottom: 6px;
    transition: background-color 0.3s, color 0.3s;
  }
  .button-footer:hover {
    background-color: white;
    color: #262445;
  }
  @media (max-width: 991px) {
  /* Styles for screen sizes below 992 pixels */
  .button-footer {
    text-align: left;
    display: flex;
    align-items: center;
    padding-top: 6px;
    padding-bottom: 6px;
    transition: background-color 0.3s, color 0.3s;
    color: white; /* Set text color to white */
    text-decoration: none; /* Remove text decorations */
  }
}
  .material-symbols-outlined {
    display: flex;
    align-items: center;
    margin-right: 5px;
    margin-left: 5px;
  }
  .material-symbols-outlined img {
    height: 14px;
    width: auto;
    margin-right: 15px;
    vertical-align: middle;
  }
</style>
  <!--  Google Tag Manager  -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MFMDT3SB');</script>
  <!--  End Google Tag Manager  -->
  <style>
	.label {
  	font-weight: 500 !important;
  }
  .label-selection .button-selection {
      font-weight: 500px;
  }
  .label-selection {
    display: inline-block;
    margin-right: 10px;
    position: relative;
    font-weight: 500 !important;
  }
  .input-selection[type="radio"] {
    position: absolute;
    opacity: 0;
    pointer-events: none;
    font-weight: 500px;
  }
  .button-selection {
    display: inline-block;
    padding: 6px 12px;
    height: 70px;
    border: 1px;
    border-color: transparent; 
    border-radius: 4px;
    background-color: rgba(167,167,167,17%) ;
    cursor: pointer;
    width: 180px;
    display: flex;
  	align-items: center;
  	justify-content: center;
    font-weight: 500px;
  }
  .inputButtonsDiv {
  	display: flex;
    align-items: flex-start;
    justify-content: center;
    font-weight: 500px;
    flex-wrap: wrap;
  }
@media (max-width: 768px) {
  .button-selection {
    width: 120px;
  }
  .label-selection {
    margin-right: 8px;
    font-weight: 500px;
  }
}
  .input-selection[type="radio"]:checked + .button-selection {
    background-color: #262445;
    color: #fff;
  }
  #user-id-container {
  	display: none;
  }
</style>
  <link rel="stylesheet" href="documents/chosen.txt">
  <style>
    body {
      background-color: #efefef; }
    p {
      color: #b3b3b3;
      font-weight: 300; }
    a {
      -webkit-transition: .3s all ease;
      -o-transition: .3s all ease;
      transition: .3s all ease; }
    .content {
      padding: 7rem 0; }
    h2 {
      font-size: 20px; }
    .chosen-select {
      width: 100%; }
    .chosen-container-multi {
      border: none; }
      .chosen-container-multi .chosen-choices {
        background-image: none;
        padding: 7px;
        border: none !important;
        border-radius: 4px;
        -webkit-box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.1) !important;
        box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.1) !important; }
        .chosen-container-multi .chosen-choices li.search-choice {
          -webkit-box-shadow: none;
          box-shadow: none;
          padding-top: 7px;
          padding-bottom: 7px;
          padding-left: 10px;
          padding-right: 26px;
          border: none;
          background-image: none; }
    .chosen-container-multi .chosen-choices li.search-choice .search-choice-close {
      top: 9px;
      right: 8px; }
    .chosen-container-multi .chosen-choices li.search-field input[type="text"] {
      height: 32px;
      font-size: 14px; }
    .chosen-container .chosen-drop {
      border: none !important;
      -webkit-box-shadow: none !important;
      box-shadow: none !important;
      margin-top: 3px;
      border-radius: 4px;
      -webkit-box-shadow: 0 15px 30px 0 rgba(0, 0, 0, 0.2) !important;
      box-shadow: 0 15px 30px 0 rgba(0, 0, 0, 0.2) !important; }
    /*Colors*/
    .color-1 .chosen-container-multi .chosen-choices li.search-choice {
      background-color: #e5e4cc; }
    .color-2 .chosen-container-multi .chosen-choices li.search-choice {
      background-color: #c7f0db; }
    .color-3 .chosen-container-multi .chosen-choices li.search-choice {
      background-color: #d3f4ff; }
    </style>
</head>
<body class="body-23">
  <header id="navigation" class="navigation">
    <div class="w-embed w-iframe"><!--  Google Tag Manager (noscript)  -->
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MFMDT3SB" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!--  End Google Tag Manager (noscript)  -->
    </div>
    <div class="div-block-72">
      <nav class="container-4 w-container">
        <div class="div-block-69">
          <div class="wg-element-wrapper sw6">
            <div data-hover="true" data-delay="300" class="wg-dropdown-1 w-dropdown">
              <div lang="de" class="wg-dd-1-togle w-dropdown-toggle">
                <div class="wg-selector-text-wrapper">
                  <div class="wg-flag"><img src="images/de.svg" alt="" class="wg-flag-ico"></div>
                  <div>DE</div>
                </div>
              </div>
              <nav class="wg-dd-1-list wg-dropdown-link-flag w-dropdown-list">
                <a lang="en" href="#" class="wg-dropdown-1-link w-inline-block">
                  <div class="wg-selector-text-wrapper">
                    <div class="wg-flag"><img src="images/gb.svg" alt="" class="wg-flag-ico"></div>
                    <div>EN</div>
                  </div>
                </a>
                <a lang="fr" href="#" class="wg-dropdown-1-link w-inline-block">
                  <div class="wg-selector-text-wrapper">
                    <div class="wg-flag"><img src="https://uploads-ssl.webflow.com/646dcc901ee966061c6939ad/646dcc911ee966061c693a1c_fr.svg" alt="" class="wg-flag-ico"></div>
                    <div>FR</div>
                  </div>
                </a>
                <a lang="it" href="#" class="wg-dropdown-1-link w-inline-block">
                  <div class="wg-selector-text-wrapper">
                    <div class="wg-flag"><img src="images/it.png" alt="" class="wg-flag-ico"></div>
                    <div>IT</div>
                  </div>
                </a>
              </nav>
            </div>
          </div>
          <div class="wg-code w-embed w-script">
            <style>
.wg-dd-1-togle {
    color: white;
}
</style>
            <script type="text/javascript" src="https://cdn.weglot.com/weglot.min.js"></script>
            <script>
// init Weglot
Weglot.initialize({
	api_key: 'wg_61ee3b20b1064c455b2aae925b39b81b6'
});
// on Weglot init
Weglot.on('initialized', ()=>{
	// get the current active language
  const currentLang = Weglot.getCurrentLang();
  // call updateFlagDropdownLinks function
  updateSW6FlagDropdownLinks(currentLang);
  setLanguageAttributes(currentLang)
});
// for each of the .wg-element-wrapper language links
document.querySelectorAll('.wg-element-wrapper.sw6 [lang]').forEach((link)=>{
    // add a click event listener
    link.addEventListener('click', function(e){
        // prevent default
        e.preventDefault();
        // get the current language
        var currentLang = this.getAttribute('lang');
        // switch to the current active language      
        Weglot.switchTo(currentLang);
        // change the innerHTML of the div
        // call updateDropdownLinks function
        updateSW6FlagDropdownLinks(currentLang);
    });
});
// updateFlagDropdownLinks function
function updateSW6FlagDropdownLinks(currentLang){
	// get the wrapper element
	const $wrapper = document.querySelector('.wg-element-wrapper.sw6'); 
  // if the .w-dropdown-toggle is not the current active language
 	if($wrapper.querySelector('.w-dropdown-toggle').getAttribute('lang') !== currentLang){
  	// swap the dropdown toggle's innerHTML with the current active language link innerHTML
  	const $activeLangLink = $wrapper.querySelector('[lang='+currentLang+']');
    const childDiv = $activeLangLink.innerHTML;
    console.log(childDiv);
    const $toggle = $wrapper.querySelector('.w-dropdown-toggle');
    const toggleDiv = $toggle.innerHTML;
    $toggle.innerHTML = childDiv;
    $activeLangLink.innerHTML = toggleDiv;
    // swap the dropdown toggle's lang attr with the current active language link lang attr
		const lang = $activeLangLink.getAttribute('lang');
    //setLanguageAttributes(lang);
   	const toggleLang = $toggle.getAttribute('lang');
		$toggle.setAttribute('lang', lang);
		$activeLangLink.setAttribute('lang', toggleLang);
    adjustInnerHtml();
    setLanguageAttributes(lang);
  }
}
function adjustInnerHtml() {
	document.querySelectorAll('.wg-element-wrapper.sw6 [lang]').forEach((link)=>{
		var currentLang = link.getAttribute('lang');
		link.querySelector('div.wg-selector-text-wrapper > div:last-child').innerHTML = currentLang.toUpperCase();
	});
}
</script>
          </div>
          <div class="div-block-63">
            <a href="index.html" class="navbar-brand w-nav-brand"><img src="images/cardea-insurance-transparent.png" loading="lazy" sizes="154px" height="45" alt="cardea insurance logo" srcset="images/cardea-insurance-transparent-p-500.png 500w, images/cardea-insurance-transparent-p-800.png 800w, images/cardea-insurance-transparent.png 980w" class="image-19"></a>
          </div>
          <div class="nav-button-wrapper mobile">
            <a href="login.html" class="link-block-5 w-inline-block">
              <div id="userGreeting" class="text-block-16"> </div>
              <div class="html-embed-35 w-embed w-script">
                <script>
    function jwtDecode(token) {
      var base64Url = token.split('.')[1];
      var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      var jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));
      return JSON.parse(jsonPayload);
    }
    // Wait for the DOM to be fully loaded before running the script
    document.addEventListener("DOMContentLoaded", function() {
      const token = sessionStorage.getItem('token');
      // Check if the token exists
      if (token) {
        // Get the user's given name from the token using jwtDecode
        const userGivenName = jwtDecode(token).given_name;
        console.log(jwtDecode(token));
        // Set the text of the element with the id "userGreeting" to a welcome message
        document.getElementById("userGreeting").textContent = `${userGivenName}`;
      } else {
        // Set the text of the element with the id "userGreeting" to "Anmelden"
        document.getElementById("userGreeting").textContent = "Anmelden";
      }
    });
  </script>
              </div>
              <div class="html-embed-28 w-embed"><span class="material-symbols-outlined" style="font-size:32px;">
                  account_circle
                </span></div>
            </a>
          </div>
        </div>
        <nav class="navbar-no-shadow">
          <div data-animation="default" class="navbar-no-shadow-container w-nav" data-easing2="ease-in-out" data-easing="ease-in-out" data-collapse="medium" role="banner" data-no-scroll="1" data-duration="0" data-doc-height="1">
            <nav class="container-regular">
              <nav class="navbar-wrapper">
                <nav role="navigation" class="nav-menu-wrapper w-nav-menu">
                  <ul id="navMenu" role="list" class="nav-menu w-list-unstyled">
                    <li id="userPages" class="list-item list-item-2">
                      <div class="html-7 w-embed">
                        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
                        <style>
.fa-caret-down {
	display: inline-block;
   margin-left: 5px;
}
.dropdownH {
	display: inline-block;
  float: left;
  overflow: hidden;
}
.dropdownH .dropbtn {
  border: none;
  outline: none;
  font-family: "Nunito", sans-serif;
  padding: 14px 16px;
  font-weight: 700;
  text-decoration: none;
  margin: 0;
}
.dropdownH-content {
  display: none;
  position: absolute;
  background-color: #262445;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}
.dropdownH-content a {
  float: none;
  color: white;
  padding: 6px 8px;
  font-family: "Nunito", sans-serif;
  font-weight: 400;
  text-decoration: none;
  display: block;
  text-align: left;
}
.dropdownH-content a:hover {
  background-color: #0081ff;
}
.dropdownH:hover .dropdownH-content {
  display: block;
}
@media (max-width: 991px) {
  .dropbtn.Nav_Link2 {
    color: black;
  }
}
.nav-link {
	color: #FFFFFF;
}
</style>
                        <div class="dropdownH">
                          <span class="dropbtn nav-link2" id="versicherung-link">Mein Konto<i class="fa fa-caret-down"></i></span>
                          <div class="dropdownH-content">
                            <a href="my-insurance.html">Meine Policen</a>
                            <a href="referral.html">Meine Empfehlungen</a>
                            <a href="cashback.html">Mein Cashback</a>
                          </div>
                        </div>
                        <style>
  .disabled {
    cursor: default;
    pointer-events: none;
  }
</style>
                      </div>
                    </li>
                    <li class="list-item list-item-2">
                      <div class="html-embed-14 w-embed">
                        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
                        <div class="dropdownH">
                          <a href="/versicherung" class="dropbtn nav-link2" id="versicherung-link">Versicherungen<i class="fa fa-caret-down"></i></a>
                          <div class="dropdownH-content">
                            <a href="/versicherung#krankenkasse">Krankenkasse</a>
                            <a href="/versicherung#fahrzeugversicherung">Fahrzeugversicherung</a>
                            <a href="/versicherung#haushaltsversicherung">Haushaltsversicherung</a>
                            <a href="/versicherung#lebensversicherung">Lebensversicherung</a>
                            <a href="/versicherung#rechtsschutz">Rechtsschutz</a>
                            <a href="/versicherung#reiseversicherung">Reiseversicherung</a>
                            <a href="/versicherung#tierversicherung">Tierversicherung</a>
                            <a href="/versicherung#gebaeudeversicherung">Gebäudeversicherung</a>
                            <a href="/versicherung#wertsachenversicherung">Wertsachenversicherung</a>
                            <a href="/versicherung#handyversicherung">Handyversicherung</a>
                            <a href="/versicherung#laptopversicherung">Laptopversicherung</a>
                            <a href="/versicherung#andere">Andere</a>
                          </div>
                        </div>
                        <style>
  .disabled {
    cursor: default;
    pointer-events: none;
  }
</style>
                      </div>
                    </li>
                    <li class="list-item-2">
                      <a href="mandat.html" aria-current="page" class="nav-link2 w--current">Betreuung</a>
                    </li>
                    <li class="list-item list-item-2">
                      <div class="html-embed-14 second w-embed">
                        <div class="dropdownH">
                          <a class="dropbtn nav-link2" id="uber-uns-link">Über uns<i class="fa fa-caret-down"></i></a>
                          <div class="dropdownH-content">
                            <a href="/dienstleistungen">Über uns</a>
                            <a href="blog.html">Blog</a>
                            <a href="faq.html">FAQ</a>
                          </div>
                        </div>
                      </div>
                    </li>
                    <li class="list-item list-item-2">
                      <a href="contact.html" class="nav-link2">Kontakt</a>
                    </li>
                    <li class="list-item notvisiblefordesktop list-item-2"><button id="langButton" class="button-primary" data-wf-user-logout="Abmelden" data-wf-user-login="Anmelden" type="button">Abmelden</button></li>
                  </ul>
                </nav>
                <div id="menu-button" class="menu-button w-nav-button">
                  <div class="icon-2 w-icon-nav-menu"></div>
                </div>
              </nav>
            </nav>
          </div>
        </nav>
      </nav>
    </div>
    <div class="html-embed-9 w-embed w-script">
      <style>
body {
  position: relative;
  /* other styles as necessary */
}
.nav-link2.w--current {
    color: white!important;
    text-align: left;
}
</style>
      <script>
	const accessToken = sessionStorage.getItem('accessToken');
  const userPages = document.getElementById('userPages');
  if (accessToken) {
    userPages.style.display = 'block';
  } else {
    userPages.style.display = 'none';
  }
</script>
      <script>
document.addEventListener('DOMContentLoaded', function () {
  // Select the caret icon
  var caret = document.querySelector('.fa-caret-down');
  // Add click event listener to the caret icon
  caret.addEventListener('click', function(event) {
    // Prevent the default action
    event.preventDefault();
    // Check if the window width is less than 992 pixels
    if (window.innerWidth < 992) {
      // Select the dropdown content
      var dropdownContent = this.parentElement.querySelector('.dropdownH-content');
      // Toggle the display property
      if (dropdownContent.style.display === 'block') {
        dropdownContent.style.display = 'none';
      } else {
        dropdownContent.style.display = 'block';
      }
    }
  });
window.addEventListener('scroll', function() {
    if (window.innerWidth < 992) {
        var navMenu = document.querySelector('[data-nav-menu-open]');
        if (navMenu) {
            navMenu.removeAttribute('data-nav-menu-open');
        }
    }
});
  // Add a listener for window resize to adjust dropdown visibility accordingly
  window.addEventListener('resize', function() {
    var dropdowns = document.getElementsByClassName("dropdownH-content");
    for (var i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (window.innerWidth >= 992) {
        // Always show the dropdown on larger screens
        openDropdown.style.display = 'block';
      } else {
        // Hide the dropdown on smaller screens
        openDropdown.style.display = 'none';
      }
    }
  });
});
</script>
    </div>
    <div id="offerteDivBlock" class="div-block-95">
      <div class="html-embed-27 w-embed">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
        <style>
#offerteDivBlock {
  /* Your existing styles, make sure it's relative if it's not already */
  position: relative;
}
.offerteText {
	padding-right: 20px;
  padding-left: 20px;
  display: flex; /* Set up flexbox layout */
  flex-wrap: wrap; /* Allow items to wrap to the next line */
  justify-content: center; /* Center-align items on the main axis */
  text-align: center; /* Center-align text for when items wrap */
  width: 100%; /* Set a width to the parent container */
}
#closeButton {
  /* Position it at the top-right corner of the offerteDivBlock */
  position: absolute;
  right: 5px; /* Align to the far right */
  top: 0; /* Align to the top */
  cursor: pointer; /* Change cursor on hover */
  padding: 5px; /* Add space around the 'X' for easier clicking */
  /* Add more styles if needed */
}
.promoLink{
	color: white;
  text-decoration: none;
}
</style>
        <a class="promoLink" href="mandat.html">
          <div id="offerTextBox" class="offerteText">
            Gewinne Ein iPhone 15 Pro Max Indem Wir Deine Versicherung Kostenlos Betreuen!&nbsp;
            <div class="countdown">
              Offerte gilt:
              <span id="days">0</span> Tage,
              <span id="hours">0</span> Std.
              <span id="minutes">0</span> Min.
              <span id="seconds">0</span> Sek.
            </div>
          </div>
        </a>
        <span id="closeButton" style="cursor:pointer;position:absolute;right:0;top:0;font-size:24px" class="material-symbols-outlined">
          close
        </span>
      </div>
      <div class="html-embed-25 w-embed w-script">
        <script>
function hideOffer() {
    const offerDiv = document.getElementById('offerteDivBlock');
    offerDiv.style.display = 'none';
}
document.getElementById('closeButton').addEventListener('click', hideOffer);
function updateCountdown() {
    const now = new Date();
    const year = now.getFullYear();
    const targetDate = new Date(year, 2, 1); // January 14th of the current year
    // Check if the current date is past January 14th
    if (now >= targetDate) {
        targetDate.setFullYear(year + 1); // If so, set the target to January 14th of the next year
    }
    const diffInSeconds = Math.floor((targetDate - now) / 1000);
    const days = Math.floor(diffInSeconds / (60 * 60 * 24));
    const hours = Math.floor(diffInSeconds / (60 * 60) % 24);
    const minutes = Math.floor(diffInSeconds / 60 % 60);
    const seconds = Math.floor(diffInSeconds % 60);
    document.getElementById('days').textContent = days;
    document.getElementById('hours').textContent = hours;
    document.getElementById('minutes').textContent = minutes;
    document.getElementById('seconds').textContent = seconds;
}
setInterval(updateCountdown, 1000);
</script>
      </div>
    </div>
  </header>
  <div class="code-embed-6 w-embed w-script">
    <style>
        .step {
            color: #262445;
        }
        .current-step {
            /*color: #262445;
            border-color: #262445;*/
        }
        .current-step-text {
            color: #262445;
        }
        .divider {
            display: none; /* Hide the divider by default */
        }
        @media (min-width: 640px) {
            .divider {
                display: block; /* Show the divider on larger screens */
            }
                    .li-list {
            flex: 1;
            display: flex;
        }
        }
        .li-list {
            flex: 1;
            display: flex;
            justify-content: center;
   	 				text-align: center;
        }
        /* Media query for screens below 420px */
@media (max-width: 420px) {
    .span-container-progress-bar {
        flex-direction: column; /* Stack icon and text vertically */
        text-align: center;
    }
    .span-container-progress-bar > span {
        margin-bottom: 0.5rem; /* Add some space between icon and text */
    }
}
    </style>
    <body>
      <nav aria-label="Progress" class="progressBar w-full mx-auto bg-white ">
        <ol role="list" class="divide-y divide-gray-300 border border-gray-300 flex overflow-x-auto">
          <li class="li-list relative flex flex-1">
            <!--  Current Step  -->
            <a href="#" id="step-1" class="group flex items-center justify-center py-4 text-sm font-medium" aria-current="step">
              <span class="span-container-progress-bar flex items-center px-6 text-sm font-medium">
                <span class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full current-step border-2">
                  <span class="material-icons">assignment</span>
                </span>
                <span class="ml-1 text-sm font-medium current-step-text">Mandatieren</span>
              </span>
            </a>
            <!--  Arrow separator for lg screens and up  -->
            <div class="divider absolute right-0 top-0 h-full w-5 hidden md:block" aria-hidden="true">
              <svg class="h-full w-full text-gray-300" viewbox="0 0 22 80" fill="none" preserveaspectratio="none">
                <path d="M0 -2L20 40L0 82" vector-effect="non-scaling-stroke" stroke="currentcolor" stroke-linejoin="round"></path>
              </svg>
            </div>
          </li>
          <li class="li-list relative flex flex-1">
            <!--  Upcoming Step  -->
            <a href="#" id="step-2" class="span-container flex items-center justify-center py-4 text-sm font-medium">
              <span class="span-container-progress-bar flex items-center px-6 text-sm font-medium">
                <span class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full border-2 border-gray-300">
                  <span class="material-icons text-gray-500">edit</span>
                </span>
                <span class="ml-1 text-sm font-medium text-gray-500">Signieren</span>
              </span>
            </a>
            <!--  Arrow separator for lg screens and up  -->
            <div class="divider absolute right-0 top-0 h-full w-5 hidden md:block" aria-hidden="true">
              <svg class="h-full w-full text-gray-300" viewbox="0 0 22 80" fill="none" preserveaspectratio="none">
                <path d="M0 -2L20 40L0 82" vector-effect="non-scaling-stroke" stroke="currentcolor" stroke-linejoin="round"></path>
              </svg>
            </div>
          </li>
          <li class="li-list relative flex flex-1">
            <!--  Upcoming Step  -->
            <a href="#" id="step-3" class="span-container group flex items-center justify-center py-4 text-sm font-medium">
              <span class="span-container-progress-bar flex items-center px-6 text-sm font-medium">
                <span class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full border-2 border-gray-300 group-hover:border-gray-400">
                  <span class="material-icons text-gray-500 group-hover:text-gray-900">verified_user</span>
                </span>
                <span class="ml-1 text-sm font-medium text-gray-500 group-hover:text-gray-900">Insurances</span>
              </span>
            </a>
            <!--  Arrow separator for lg screens and up  -->
            <div class="divider absolute right-0 top-0 h-full w-5 hidden md:block" aria-hidden="true">
              <svg class="h-full w-full text-gray-300" viewbox="0 0 22 80" fill="none" preserveaspectratio="none">
                <path d="M0 -2L20 40L0 82" vector-effect="non-scaling-stroke" stroke="currentcolor" stroke-linejoin="round"></path>
              </svg>
            </div>
          </li>
          <li class="li-list relative flex flex-1">
            <!--  Upcoming Step  -->
            <a href="#" id="step-4" class="span-container group flex items-center justify-center py-4 text-sm font-medium">
              <span class="span-container-progress-bar flex items-center px-6 text-sm font-medium">
                <span class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full border-2 border-gray-300 group-hover:border-gray-400">
                  <span class="material-icons text-gray-500 group-hover:text-gray-900">account_circle</span>
                </span>
                <span class="ml-1 text-sm font-medium text-gray-500 group-hover:text-gray-900">Registrieren</span>
              </span>
            </a>
          </li>
        </ol>
      </nav>
      <script>
    		var firstStep = document.querySelector('ol li:first-child');
    if (firstStep) {
        // Update the appearance to reflect completion
        var firstStepLink = firstStep.querySelector('a');
        if (firstStepLink) {
            firstStepLink.setAttribute('aria-current', '');
        }
        var firstStepIcon = firstStep.querySelector('.h-10.w-10');
        if (firstStepIcon) {
            firstStepIcon.innerHTML = `<svg class="h-6 w-6 text-white" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                        <path fill-rule="evenodd" d="M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z" clip-rule="evenodd" />
                                       </svg>`;
            firstStepIcon.style.backgroundColor = '#1ca350'; // Set to your new main color
            firstStepIcon.classList.remove('border-gray-300', 'border-green-600');
            firstStepIcon.classList.add('bg-1ca350'); // Assuming you want the background color for the icon
        }
    }
        function updateClasses() {
            const screenWidth = window.innerWidth;
            const spanContainers = document.querySelectorAll('.span-container-progress-bar');
            const liList = document.querySelectorAll('.li-list');
            if (screenWidth < 720) {
                spanContainers.forEach(container => {
                    container.classList.remove('px-6');
                    container.style.marginLeft = '1px';
                    container.style.marginRight = '1px';
                });
                liList.forEach(container => {
                    container.classList.remove('flex-1');
                });
            } else {
                spanContainers.forEach(container => {
                    container.classList.add('px-6');
                    container.style.marginLeft = '';
                    container.style.marginRight = '';
                });
                liList.forEach(container => {
                    container.classList.add('flex-1');
                });
            }
        }
        window.addEventListener('resize', updateClasses);
        window.addEventListener('DOMContentLoaded', updateClasses);
    </script>
  </body></div>
  <div id="mainContent" class="div-block-91">
    <div id="formMandate" class="formmandate">
      <div class="html-embed-47 w-embed w-script">
        <style>
    .text-center {
      text-align: center;
    }
    .numbered-list {
      list-style-type: decimal; /* Use decimal numbers for list items */
      margin: 0 auto; /* Center align the list */
      padding-left: 20px; /* Ensure the numbers have some space */
      max-width: 330px; /* Constrain the width */
      text-align: left; /* Align the text to the left within the list */
    }
    .numbered-list li {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.5s forwards;
    }
    .numbered-list li.hide-marker {
      list-style-type: none; /* Hide the list marker (number) */
      padding-left: 0; /* Remove padding to align with other list items */
      margin-left: -32px;
    }
    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    a {
      text-decoration: none;
    }
    .faq-link .material-symbols-outlined {
      vertical-align: sub; /* Ensure the icon is aligned with the text */
      margin-right: 4px; /* Add a little space between the icon and text */
    }
    .textContent {
    	margin-left: -6px;
    }
  </style>
        <div class="text-center">
          <div class="text-lg text-gray-700 mt-2">
            <center>
              <a href="https://cardea-insurance.com/autobahnvignette">
                <img width="200px" src="images/autobahnvignette3.png">
              </a>
            </center>
            <br>
            <h1 class="text-3xl font-semibold text-gray-800 leading-tight mb-4">
              Jährliche & kostenlose <br> Autobahn-Vignette!
            </h1>
            <ol class="numbered-list">
              <li>Formular ausfüllen</li>
              <li>Mandat bestätigen</li>
              <li>Account registrieren</li>
              <li>Geschafft! Autobahnvignette 4-EVER</li>
              <li class="hide-marker">
                <a href="https://cardea-insurance.com/autobahnvignette" class="faq-link">
                  <span class="material-symbols-outlined">link</span> <span class="textContent">Antworten zu häufig gestellten Fragen</span>
                </a>
              </li>
            </ol>
          </div>
        </div>
        <script>
    document.addEventListener('DOMContentLoaded', () => {
      const listItems = document.querySelectorAll('.numbered-list li');
      listItems.forEach((item, index) => {
        item.style.animationDelay = `${index * 1}s`;
      });
    });
  </script>
      </div>
      <div class="div-block-131">
        <div class="div-block-132"></div>
        <div id="mandatForm" class="div-block-110">
          <div class="div-block-94">
            <div class="versicherung-betreuen-section">
              <div class="w-embed">
                <div id="errorType" style="display:none; color:red; margin-top: 10px;">
                  Bitte wähle einen Typ aus!
                </div>
                <div class="inputButtonsDiv">
                  <label class="label-selection">
                    <input class="input-selection" type="radio" name="type" value="IN" checked="">
                    <span class="button-selection" style="display: block; height: 90px; text-align: center; font-weight: 500; font-size: 16px;">
                      <span class="material-symbols-outlined" style="font-size: 36px;">person</span>
                      <br>Privatkunde
                    </span>
                  </label>
                  <label class="label-selection">
                    <input class="input-selection" type="radio" name="type" value="KMU">
                    <span class="button-selection" style="display: block; height: 90px; text-align: center; font-weight: 500; font-size: 16px;">
                      <span class="material-symbols-outlined" style="font-size: 36px;">apartment</span>
                      <br>Firmenkunde
                    </span>
                  </label>
                </div>
                <div id="firmenname" class="floating-label-group" style="display:none;">
                  <input type="text" id="firmennamen" name="firmennamen" maxlength="256" placeholder=" " autocomplete="organization" required="">
                  <label for="firmennamen" class="floating-label">Firmenname *</label>
                </div>
                <span class="text-xl text-gray-800 leading-tight">Name</span>
                <div id="errorGivenName" style="display:none; color:red; margin-top: 10px;">
                  Bitte gib deinen Vornamen ein!
                </div>
                <div class="floating-label-group">
                  <input type="text" id="given_name" name="given_name" maxlength="256" placeholder=" " autocomplete="given-name" required="">
                  <label for="given_name" class="floating-label">Vorname *</label>
                </div>
                <div id="errorFamilyName" style="display:none; color:red; margin-top: 10px;">
                  Bitte gib deinen Nachnamen ein!
                </div>
                <div class="floating-label-group">
                  <input type="text" id="family_name" name="family_name" maxlength="256" placeholder=" " autocomplete="family-name" required="">
                  <label for="family_name" class="floating-label">Nachname *</label>
                </div>
                <span class="text-xl text-gray-800 leading-tight">Adresse</span>
                <div id="errorAdresse" style="display:none; color:red; margin-top: 10px;">
                  Bitte gib deine Adresse ein!
                </div>
                <div class="floating-label-group">
                  <input type="text" id="adresse" name="adresse" maxlength="256" placeholder=" " autocomplete="street-address" required="">
                  <label for="adresse" class="floating-label">Adresse *</label>
                </div>
                <div id="errorPlz" style="display:none; color:red; margin-top: 10px;">
                  Bitte gib deine Postleitzahl ein!
                </div>
                <div class="floating-label-group personal-details-autocomplete">
                  <input type="number" id="plz" name="plz" maxlength="4" placeholder=" " autocomplete="postal-code" class="PLZ" required="">
                  <label for="plz" class="floating-label">PLZ *</label>
                </div>
                <div id="errorOrt" style="display:none; color:red; margin-top: 10px;">
                  Bitte gib deinen Wohnort ein!
                </div>
                <div class="floating-label-group personal-details-autocomplete">
                  <input type="text" id="ort" name="ort" maxlength="256" placeholder=" " autocomplete="address-level2" class="Ort" required="">
                  <label for="ort" class="floating-label">Ort *</label>
                </div>
                <span class="text-xl text-gray-800 leading-tight">Kontakt</span>
                <div id="errorEmail" style="display:none; color:red; margin-top: 10px;">
                  Bitte gib deine E-Mail-Adresse ein!
                </div>
                <div class="floating-label-group">
                  <input type="email" id="email" name="email" maxlength="256" placeholder=" " autocomplete="email" required="">
                  <label for="email" class="floating-label">E-Mail *</label>
                </div>
              </div>
            </div>
            <div class="code-embed-14 w-embed w-script">
              <style>
.center-container {
    display: flex;          /* Enables flexbox */
    justify-content: center; /* Center items horizontally */
    align-items: center;     /* Center items vertically */
}
</style>
              <button id="finishButton" type="button" class="button-7 button-primary" style="display:block; width:100%;">
                Weiter
              </button>
              <script>
document.querySelectorAll(".PLZ").forEach(inputElement => {
    inputElement.addEventListener("input", function() {
        var plzValue = this.value;
        if (plzValue.length === 4) {
            // Define the API endpoint and the parameters
            const apiEndpoint = "https://api3.geo.admin.ch/rest/services/api/MapServer/find";
            const params = new URLSearchParams({
                layer: "ch.swisstopo-vd.ortschaftenverzeichnis_plz",
                searchText: plzValue,
                searchField: "plz",
                contains: "true",
                returnGeometry: "false",
                sr: "2056",
                lang: "en"
            });
            // Construct the full URL with parameters
            const url = `${apiEndpoint}?${params.toString()}`;
            // Make the request using fetch
            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('API Response:', data); // Debug: Log the API response
                    if (data.results && data.results.length > 0) {
                        // Find the personal-details-autocomplete parent
                        const personalDetailsElement = inputElement.closest('.personal-details-autocomplete');
                        console.log('Personal Details Element:', personalDetailsElement); // Debug: Log the parent element
                        // Assuming there's a corresponding 'Ort' class for each 'PLZ'
                        const correspondingOrtElement = document.querySelector('.Ort');
                        console.log('Corresponding Ort Element:', correspondingOrtElement); // Debug: Log the Ort element
                        if (correspondingOrtElement) {
                            const ortName = data.results[0].attributes.langtext;
                            console.log('Updating Ort field with:', ortName); // Debug: Log the value to be updated
                            correspondingOrtElement.value = ortName;
                        } else {
                            console.log('No corresponding Ort element found');
                        }
                    }
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
        }
    });
});
  document.querySelectorAll('input[name="type"]').forEach(function(elem) {
    elem.addEventListener('change', function() {
      // Check if the KMU radio button is selected
      if (this.value === 'KMU') {
        // If it is, display the firmenname div as block
        document.getElementById('firmenname').style.display = 'block';
      } else {
        // If another radio button is selected, don't display it as block
        document.getElementById('firmenname').style.display = 'none';
      }
    });
  });
</script>
              <script>
document.getElementById("finishButton").addEventListener("click", function() {
    // Assuming processFinishButton() does some other tasks not related to UI updates.
		var firstStep = document.querySelector('ol li:first-child');
    if (firstStep) {
        // Update the appearance to reflect completion
        var firstStepLink = firstStep.querySelector('a');
        if (firstStepLink) {
            firstStepLink.setAttribute('aria-current', '');
        }
        var firstStepIcon = firstStep.querySelector('.h-10.w-10');
        if (firstStepIcon) {
            firstStepIcon.innerHTML = `<svg class="h-6 w-6 text-white" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                        <path fill-rule="evenodd" d="M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z" clip-rule="evenodd" />
                                       </svg>`;
            firstStepIcon.style.backgroundColor = '#1ca350'; // Set to your new main color
            firstStepIcon.classList.remove('border-gray-300', 'border-green-600');
            firstStepIcon.classList.add('bg-1ca350'); // Assuming you want the background color for the icon
        }
    }
    // Change the second step to current
    var secondStep = document.querySelector('ol li:nth-child(2)');
    if (secondStep) {
        var secondStepLink = secondStep.querySelector('a');
        if (secondStepLink) {
            secondStepLink.setAttribute('aria-current', 'step');
        }
        var secondStepIcon = document.getElementById("secondStep");
        if (secondStepIcon) {
            secondStepIcon.classList.remove('border-gray-300', 'border-indigo-600');
            secondStepIcon.classList.add('border-blue-950');
            secondStepIcon.style.color = '#262445'; // Ensure the text color is set
        }
        var secondStepTexts = secondStep.querySelectorAll('.text-gray-500, .text-indigo-600');
        secondStepTexts.forEach(text => {
            text.style.color = '#262445'; // Update text color directly
        });
    }
    processFinishButton();
});
  function updateName(newName) {
    // Select the paragraph by its ID
    var paragraph = document.getElementById('infoMandat');
    // Update the inner HTML to include the new name
    paragraph.innerHTML = `<span class="text-2xl"><b>Bravo ${newName}! Fast geschafft!</b></span>
<br>
<br>
Bitte unterzeichne unten das Mandat, um Teil unserer Community zu werden!
<br>
<br>
     Die Dienstleistung von Cardea ist für Dich <span class="font-semibold text-green-600">kostenlos</span>.`;
  }
function processFinishButton() {
// Get selected type value
let type = document.querySelector('input[name="type"]:checked');
let typeValue = type ? type.value : null;
let givenName = document.getElementById("given_name").value;
let familyName = document.getElementById("family_name").value;
let adresse = document.getElementById("adresse").value;
let plz = document.getElementById("plz").value;
let ort = document.getElementById("ort").value;
let email = document.getElementById("email").value;
// List of all error element IDs to hide initially
let errorElements = ['errorType', 'errorGivenName', 'errorFamilyName', 'errorAdresse', 'errorPlz', 'errorOrt', 'errorEmail'];
for (let errorEl of errorElements) {
    let errorElement = document.getElementById(errorEl);
    if (errorElement) {
        errorElement.style.display = "none";
    }
}
// Define the error conditions
let errorConditions = [
    {
        check: !typeValue,
        element: 'errorType'
    },
    {
        check: givenName === '',
        element: 'errorGivenName'
    },
    {
        check: familyName === '',
        element: 'errorFamilyName'
    },
    {
        check: adresse === '',
        element: 'errorAdresse'
    },
    {
        check: plz === '',
        element: 'errorPlz'
    },
    {
        check: ort === '',
        element: 'errorOrt'
    },
    {
        check: email === '',
        element: 'errorEmail'
    }
];
let hasError = false; // Flag to keep track of any error
// Iterate over the errorConditions array and use switch-case for error handling
errorConditions.forEach(function(error) {
    if (error.check) {
        let errorElement = document.getElementById(error.element);
        if (errorElement) {
            errorElement.style.display = "block";
        }
        hasError = true;
    }
});
// If there are errors, exit the function
if (hasError) {
    return;
}
    let formData = {};
// Assign each value to the object properties
formData.type = typeValue;
formData.given_name = givenName;
formData.family_name = familyName;
formData.adresse = adresse;
formData.plz = plz;
formData.ort = ort;
formData.email = email;
// Assign selected insurances as an array
formData.insurances = "none yet";
console.log("formdata: ",formData);
    function sendLead() {
        $.ajax({
            url: 'https://psk39h1hij.execute-api.eu-north-1.amazonaws.com/prod/getLead',
            type: 'POST',
        processData: false,  // Important: don't process data into a query string
        contentType: false, 
            data: JSON.stringify(formData), // Convert formData object to JSON string
			async: true
        });
    }
    sendLead();
    updateName(givenName);
    toggleDivs();
		scrollToElement('signature'); 
}
function scrollToElement(selector) {
  let element = document.getElementById(selector);
  let elementRect = element.getBoundingClientRect();
  let absoluteElementTop = elementRect.top + window.pageYOffset;
  let middle = absoluteElementTop - (window.innerHeight / 2 * 0.8);
  window.scrollTo({
    top: middle, 
    behavior: "smooth"
  });
}
function toggleDivs() {
    document.getElementById('signature').style.display = "block";
    document.getElementById('formMandate').style.display = "none";
}
function setUpInputField(inputFieldId, placeholderText) {
    const inputField = document.getElementById(inputFieldId);
    inputField.addEventListener('focus', () => {
        inputField.setAttribute('placeholder', placeholderText); // Custom placeholder text when focused
    });
    inputField.addEventListener('blur', () => {
        if (!inputField.value) {
            inputField.setAttribute('placeholder', ' '); // Placeholder removed when not focused and no text is entered
        }
    });
}
// Set up each input field with custom placeholder
setUpInputField('firmennamen', 'Bank AG');
setUpInputField('given_name', 'Max');
setUpInputField('family_name', 'Mustermann');
setUpInputField('adresse', 'Bahnhofstrasse 1');
setUpInputField('plz', '8001');
setUpInputField('ort', 'Zürich');
setUpInputField('email', 'max.mustermann@gmail.com');
</script>
            </div>
          </div>
        </div>
        <div class="code-embed-5 w-embed w-script">
          <style>
        .bullet-td::before {
            content: '•';
            margin-right: 8px; /* Abstand zwischen Bullet Point und Text */
            color: #262445; /* Tailwind Blue-600 */
        }
                .faq-link {
            color: #1D4ED8; /* Tailwind Blue-500 */
            text-decoration: none;
        }
        .info-icon {
            margin-left: 8px;
            color: #262445;
            cursor: pointer;
            position: relative;
        }
        .info-icon::before {
            content: 'ℹ️';
            font-size: 1rem;
        }
        .tooltip {
            visibility: hidden;
            background-color: #262445;
            color: #fff;
            text-align: center;
            border-radius: 0.375rem; /* Tailwind rounded-md */
            padding: 0.5rem;
            position: absolute;
            z-index: 10;
            bottom: 125%; /* Position über dem Symbol */
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            width: 175px; /* Max-width for the tooltip */
            font-size: 0.875rem; /* Tailwind text-sm */
            pointer-events: none;
        }
        .info-icon:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
    </style>
          <table class="w-full text-sm text-left text-gray-600 bg-white shadow-lg rounded-lg border border-gray-300 relative">
            <thead class="text-ms text-gray-700 uppercase bg-gray-200">
              <tr>
                <th scope="col" class="py-3 px-6">
                  Was ist Mandatierung?
                </th>
              </tr>
            </thead>
            <tbody>
              <tr class="bg-gray-50 border-b">
                <td class="py-4 px-6 bullet-td">
                  Keinen Neuabschluss!
                  <span class="info-icon">
                    <span class="tooltip">Du kannst eine bestehende<br> Versicherung von dir <br> durch uns kostenlos <br>betreuen lassen.</span>
                  </span>
                </td>
              </tr>
              <tr class="bg-white border-b">
                <td class="py-4 px-6 bullet-td">
                  Versicherungsverträgen betreuen
                  <span class="info-icon">
                    <span class="tooltip">Hiermit wird die Verwaltung <br> deiner Versicherungsverträge übernommen.</span>
                  </span>
                </td>
              </tr>
              <tr class="bg-gray-50 border-b">
                <td class="py-4 px-6 bullet-td">
                  Kontaktperson für Schadenbearbeitung
                  <span class="info-icon">
                    <span class="tooltip">Wir kümmern uns um <br> deine Schadensfälle und <br> leiten diese an <br>die Versicherer weiter.</span>
                  </span>
                </td>
              </tr>
              <tr class="bg-white border-b">
                <td class="py-4 px-6 bullet-td">
                  Individuelle Beratungen
                  <span class="info-icon">
                    <span class="tooltip">Erhalte massgeschneiderte <br> Beratungen und Empfehlungen von <br> unseren Experten.</span>
                  </span>
                </td>
              </tr>
              <tr class="bg-gray-50 border-b">
                <td class="py-4 px-6 bullet-td">
                  <a href="https://www.cardea-insurance.com/autobahnvignette" class="faq-link">Gratis Autobahnvignette</a>
                  <span class="info-icon">
                    <span class="tooltip">Registriere dich für <br> eine kostenlose Autobahnvignette <br> nach erfolgreichem Mandat.</span>
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
          <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tableRows = document.querySelectorAll('.tr-hover');
            tableRows.forEach(row => {
                row.addEventListener('mousemove', (e) => {
                    const popup = row.querySelector('.popup');
                    const offsetX = 15; // Abstand zur Maus in X-Richtung
                    const offsetY = -50; // Abstand zur Maus in Y-Richtung
                    // Positionierung des Popups relativ zur Maus
                    popup.style.top = `${e.clientY + offsetY}px`;
                    popup.style.left = `${e.clientX + offsetX}px`;
                });
            });
        });
    </script>
        </div>
        <div class="div-block-122">
          <div class="code-embed-12 w-embed w-script">
            <style>
        .text-gray-900 {
            color: #1a202c;
        }
        .text-xl {
            font-size: 1.25rem;
        }
        .mt-6 {
            margin-top: 1.5rem;
        }
        .word {
            opacity: 0;
            display: inline-block;
        }
        .word.visible {
            animation: fadeIn 0.5s forwards;
        }
        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }
    </style>
            <div class="mt-6">
              <center>
                <p id="animated-text" class="text-gray-900 text-xl">Bist du immer noch unsicher? <br>Schaue unser Erklärvideo an!</p>
              </center>
            </div>
            <script>
        document.addEventListener('DOMContentLoaded', () => {
            const textElement = document.getElementById('animated-text');
            const words = textElement.innerHTML.split(' ').map(word => `<span class="word">${word}</span>`);
            textElement.innerHTML = words.join(' ');
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const wordElements = textElement.querySelectorAll('.word');
                        wordElements.forEach((word, index) => {
                            setTimeout(() => {
                                word.classList.add('visible');
                            }, index * 300); // Adjust the delay (300ms) as needed
                        });
                        observer.disconnect(); // Stop observing after the animation
                    }
                });
            });
            observer.observe(textElement);
        });
    </script>
          </div>
          <div class="div-block-134"><img class="image-38" src="images/58f8bcf70ed2bdaf7c128307-2638015568.png" alt="" style="-webkit-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0)" sizes="100px" data-w-id="543f1fe0-3df6-3651-c2b7-f3aa37a40be7" loading="lazy" srcset="images/58f8bcf70ed2bdaf7c128307-2638015568-p-500.png 500w, images/58f8bcf70ed2bdaf7c128307-2638015568-p-800.png 800w, images/58f8bcf70ed2bdaf7c128307-2638015568-p-1080.png 1080w, images/58f8bcf70ed2bdaf7c128307-2638015568.png 1600w"></div>
          <div style="padding-top:56.17021276595745%" class="w-embed-youtubevideo youtube"><iframe src="https://www.youtube.com/embed/sYCJSEyqSX0?rel=0&amp;controls=1&amp;autoplay=0&amp;mute=0&amp;start=0" frameborder="0" style="position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:auto" allow="autoplay; encrypted-media" allowfullscreen="" title="Mandatierungsprozess bei Cardea"></iframe></div>
          <div class="w-embed">
            <style>
        .youtubeHeadline {
            font-size: 2rem;
            font-weight: 700;
            color: #d32f2f;
        }
</style>
            <center>
              <h3 id="youtubeHeadline" class="youtubeHeadline">Schweizer Fernsehen berichtet LIVE aus Zürich</h3>
            </center>
          </div>
          <div style="padding-top:56.17021276595745%" class="w-embed-youtubevideo youtube-3"><iframe src="https://www.youtube.com/embed/nQV4UFpL67w?rel=0&amp;controls=1&amp;autoplay=0&amp;mute=0&amp;start=0" frameborder="0" style="position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:auto" allow="autoplay; encrypted-media" allowfullscreen="" title="Cardea Insurance: Der Schockierende Unfall in Altstetten, ZürichCardea"></iframe></div>
        </div>
      </div>
    </div>
    <div id="signature" class="signature">
      <div class="code-embed-13 w-embed">
        <style>
.congratsUser {
    font-family: 'TT Norms', sans-serif;
    font-weight: 700;
}
</style>
        <div class="text-gray-800 text-base my-4 mx-auto max-w-4xl">
          <p id="infoMandat" class="mb-4">
            <span class="text-3xl font-semibold text-gray-800 leading-tight"><b>Bravo (Name)! Fast geschafft!</b></span>
            <br>
            <br>
            Bitte unterzeichne unten das Mandat, um Teil unserer Community zu werden!
            <br>
            <br>
            Die Dienstleistung von Cardea ist für Dich <span class="font-semibold text-green-600">kostenlos</span>.
          </p>
          <br>
          <div class="mt-4 font-semibold text-lg text-indigo-700 text-center">
            Im Feld unten signieren!
          </div>
          <a href="mandats-vertrag.html" class="text-indigo-600 hover:text-indigo-800 transition-colors duration-200 underline">
            Mehr Infos
          </a>
        </div>
      </div>
      <div>
        <div class="html-embed-46 w-embed">
          <style>
		canvas {
			border: 2px solid black;
			cursor: crosshair;
		}
    .signature p {
        color: black !important;
    }
    @media only screen and (max-width: 768px) {
    canvas {
        width: 100%;
        height: 200px;
        max-width: 100%;
        border: 2px solid black;
    }
}
</style>
          <label id="errorSignature" style="color:red; display:none;">Bitte unterschreibe hier!</label>
          <center>
            <canvas id="signatureCanvas" width="500" height="200"></canvas>
          </center>
        </div>
        <a href="#" id="clearBtn" class="button-5 button-primary w-button">Clear</a>
        <div>
          <a href="#" id="saveBtn" class="button-6 button-primary w-button">Weiter</a>
        </div>
      </div>
      <div class="w-embed w-script">
        <script>
    // Get today's date and format it as DD.MM.YYYY
    const today = new Date();
    const agreementDate = ('0' + today.getDate()).slice(-2) + '.' + 
                          ('0' + (today.getMonth() + 1)).slice(-2) + '.' + 
                          today.getFullYear();
    // When the document is fully loaded
    document.addEventListener('DOMContentLoaded', () => {
        // Replace the content of the element with the specific ID
        document.getElementById('mandat_zustimmungs_text').innerHTML = 
        `Mit Wirkung zum ${agreementDate} beauftragt die Auftraggeberin die Beauftragte (Howden AG) und Mitbeauftragte (Cardea Insurance) mit der Überprüfung, Gestaltung, Koordination sowie dem Abschluss und der laufenden Betreuung sämtlicher Versicherungsverträge. Sowohl die Beauftragte als auch die Mitbeauftragte sind ermächtigt, dazu im Namen der Auftraggeberin aufzutreten.`;
    });
</script>
      </div>
    </div>
    <div id="selectInsurances" class="selectinsurances">
      <div class="code-embed-15 w-embed w-script">
        <style>
    .card {
      cursor: pointer;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .card.selected {
      background-color: #d1d5db;
    }
    .card.selected::after {
      content: '';
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background-image: url('https://uploads-ssl.webflow.com/64233eb40608547f9d6368d5/6680bf949080852561c6ebf6_green%20tick.png');
      background-size: contain;
      background-repeat: no-repeat;
      width: 1.5rem;
      height: 1.5rem
    }
    @media (max-width: 639px) {
      #versicherungenArray {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
  </style>
        <center><span class="text-3xl font-semibold text-gray-800 leading-tight text-center"><b>Wo bist du Versichert?</b></span></center>
        <center id="animated-text-container">
          <span id="animated-text" class="text-2xl font-semibold text-gray-800 leading-tight text-center">
            <b>Wähle deine Versicherung aus!</b>
          </span>
        </center>
        <div class="container mx-auto p-4">
          <input type="text" id="searchBar" class="mb-4 p-2 border border-gray-300 rounded w-full" placeholder="Suche nach Versicherungen" oninput="filterCards()">
          <div name="versicherungenArray" id="versicherungenArray" class="grid gap-4 grid-cols-1 sm:grid-cols-3 lg:grid-cols-10">
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/allianz.png" alt="Allianz" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/automate.png" alt="Automate" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/axa.png" alt="AXA" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/baloise.png" alt="Baloise" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/concordia.png" alt="Concordia" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/coop.png" alt="Coop" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/css.png" alt="CSS" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/dextra.png" alt="Dextra" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/diemobiliar.png" alt="Die Mobiliar" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/elipslife.png" alt="ElipsLife" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/Orion.png" alt="Orion" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/erv.png" alt="Europäische Reiseversicherungs AG" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/generali.png" alt="Generali" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/groupemutuel.png" alt="Groupe Mutuel" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/helsana.png" alt="Helsana" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/helvetia.png" alt="Helvetia" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/innova.png" alt="Innova" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/lichtensteinlife.png" alt="LichtensteinLife" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/OEKK.png" alt="ÖKK" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/pax.png" alt="PAX" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/protekta.png" alt="Protekta" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/sanitas.png" alt="Sanitas" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/smile.png" alt="Smile" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/solida.png" alt="Solida" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/swica.png" alt="Swica" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/swisslife.png" alt="Swiss Life" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/sympany.png" alt="Sympany" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/vaudoise.png" alt="Vaudoise" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/visana.png" alt="Visana" class="w-full h-auto mx-auto">
              </div>
            </div>
            <div class="card overflow-hidden bg-white shadow sm:rounded-lg" onclick="toggleSelection(event)">
              <div class="px-4 py-5 sm:p-6">
                <img src="images/zurich.png" alt="Zurich" class="w-full h-auto mx-auto">
              </div>
            </div>
          </div>
        </div>
        <script>
function toggleSelection(event) {
  event.currentTarget.classList.toggle('selected');
  logSelectedInsurances();
}
function setCardHeights() {
  const cards = document.querySelectorAll('.card');
  cards.forEach(card => {
    card.style.height = `${card.clientWidth}px`;
    console.log(`Card Width: ${card.clientWidth}px, Card Height set to: ${card.style.height}`);
  });
}
function logSelectedInsurances() {
  const selectedCards = document.querySelectorAll('.card.selected');
  const selectedInsurances = Array.from(selectedCards).map(card => card.querySelector('img').alt);
  console.log('Selected Insurances:', selectedInsurances);
}
function filterCards() {
  const searchValue = document.getElementById('searchBar').value.toLowerCase();
  const cards = document.querySelectorAll('.card');
  cards.forEach(card => {
    const insuranceName = card.querySelector('img').alt.toLowerCase();
    if (insuranceName.includes(searchValue)) {
      card.style.display = 'flex';
    } else {
      card.style.display = 'none';
    }
  });
}
window.onload = () => {
  setCardHeights();
  document.getElementById('searchBar').addEventListener('input', filterCards);
};
window.onload = setCardHeights;
window.onresize = setCardHeights;
  </script>
      </div>
      <a href="#" id="finishInsuranceBtn" class="button-6 button-primary w-button">Weiter</a>
    </div>
    <div class="w-embed w-script">
      <script>
const canvas = document.getElementById('signatureCanvas');
const ctx = canvas.getContext('2d');
const saveBtn = document.getElementById('saveBtn');
saveBtn.disabled = true;
let drawing = false;
let hasDrawn = false;
function isMobileDevice() {
    return (typeof window.orientation !== "undefined") || (navigator.userAgent.indexOf('IEMobile') !== -1);
};
const dpr = isMobileDevice() ? window.devicePixelRatio || 1 : 1;
canvas.width = canvas.offsetWidth * dpr;
canvas.height = canvas.offsetHeight * dpr;
ctx.scale(dpr, dpr);
canvas.addEventListener('mousedown', () => {
    drawing = true;
    ctx.beginPath();
});
canvas.addEventListener('mouseup', () => {
    drawing = false;
});
canvas.addEventListener('mousemove', draw);
canvas.addEventListener('touchstart', (e) => {
    e.preventDefault();  // Prevent default touch behavior
    drawing = true;
    ctx.beginPath();
    draw(e.touches[0]);
});
canvas.addEventListener('touchmove', (e) => {
    e.preventDefault();  // Prevent default touch behavior
    draw(e.touches[0]);
});
canvas.addEventListener('touchend', () => {
    drawing = false;
});
function draw(e) {
    if (!drawing) return;
    let x, y;
    // Check if it's a touch event
    if (e.touches) {
        x = e.touches[0].clientX - canvas.getBoundingClientRect().left;
        y = e.touches[0].clientY - canvas.getBoundingClientRect().top;
    } else {  // If it's a mouse event
        x = e.clientX - canvas.getBoundingClientRect().left;
        y = e.clientY - canvas.getBoundingClientRect().top;
    }
    ctx.lineWidth = 5;
    ctx.lineCap = 'round';
    ctx.strokeStyle = 'black';
    ctx.lineTo(x, y);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(x, y);
    if (!hasDrawn) {
        hasDrawn = true;
        saveBtn.disabled = false; // Enable the save button
    }
}
document.getElementById('clearBtn').addEventListener('click', () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    hasDrawn = false;
    saveBtn.disabled = true;
});
let signatureData = '';  // This variable will store the signature data
async function getIPAddress() {
    try {
        const response = await fetch('https://api.ipify.org?format=json');
        const data = await response.json();
        return data.ip;
    } catch (error) {
        console.error('Error fetching IP address:', error);
        return 'Unknown IP';
    }
}
function extendCanvasHeight(extraHeight) {
    const tempCanvas = document.createElement('canvas');
    const tempCtx = tempCanvas.getContext('2d');
    tempCanvas.width = canvas.width;
    tempCanvas.height = canvas.height;
    tempCtx.drawImage(canvas, 0, 0);
    canvas.height += extraHeight;
    ctx.drawImage(tempCanvas, 0, 0);
}
document.getElementById('saveBtn').addEventListener('click', async () => {
  if (hasDrawn === false) {
    document.getElementById('errorSignature').style.display = 'block';
    return;
  }
  const ipAddress = await getIPAddress();
  const timestamp = new Date().toLocaleString();
/*
 extendCanvasHeight(30);
  ctx.font = '10px Arial';
  ctx.fillStyle = 'black';
  ctx.fillText(`IP: ${ipAddress} - ${timestamp}`, 10, canvas.height - 10);
*/
  signatureData = canvas.toDataURL();
  const token = sessionStorage.getItem('accessToken');
var firstStep = document.querySelector('ol li:nth-child(2)');
    if (firstStep) {
        // Update the appearance to reflect completion
        var firstStepLink = firstStep.querySelector('a');
        if (firstStepLink) {
            firstStepLink.setAttribute('aria-current', '');
        }
        var firstStepIcon = firstStep.querySelector('.h-10.w-10');
        if (firstStepIcon) {
            firstStepIcon.innerHTML = `<svg class="h-6 w-6 text-white" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                        <path fill-rule="evenodd" d="M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z" clip-rule="evenodd" />
                                       </svg>`;
            firstStepIcon.style.backgroundColor = '#1ca350'; // Set to your new main color
            firstStepIcon.classList.remove('border-gray-300', 'border-green-600');
            firstStepIcon.classList.add('bg-1ca350'); // Assuming you want the background color for the icon
        }
    }
    // Change the second step to current
    var secondStep = document.querySelector('ol li:nth-child(3)');
    if (secondStep) {
        var secondStepLink = secondStep.querySelector('a');
        if (secondStepLink) {
            secondStepLink.setAttribute('aria-current', 'step');
        }
        var secondStepIcon = document.getElementById("secondStep");
        if (secondStepIcon) {
            secondStepIcon.classList.remove('border-gray-300', 'border-indigo-600');
            secondStepIcon.classList.add('border-blue-950');
            secondStepIcon.style.color = '#262445'; // Ensure the text color is set
        }
        var secondStepTexts = secondStep.querySelectorAll('.text-gray-500, .text-indigo-600');
        secondStepTexts.forEach(text => {
            text.style.color = '#262445'; // Update text color directly
        });
    }
  if (token && token != null && token != "null") {
      // User is logged in, directly run the executeFetch function
    executeFetch(false);
    document.getElementById("finishInsuranceBtn").style.display = "block";
    document.getElementById("signature").style.display = "none";
  } else {
    document.getElementById('given_name').scrollIntoView();
    setAllFieldsToSameValue('given_name');
    setAllFieldsToSameValue('family_name');
    document.getElementById('phone_number').value = formatPhoneNumber();
    setAllFieldsToSameValue('email');
    document.getElementById("selectInsurances").style.display = "block";
    document.getElementById("signature").style.display = "none";
    executeFetch(false);
  }
});
document.getElementById('finishInsuranceBtn').addEventListener('click', async () => {
  if (hasDrawn === false) {
    document.getElementById('errorSignature').style.display = 'block';
    return;
  }
  const ipAddress = await getIPAddress();
  const timestamp = new Date().toLocaleString();
/*
 extendCanvasHeight(30);
  ctx.font = '10px Arial';
  ctx.fillStyle = 'black';
  ctx.fillText(`IP: ${ipAddress} - ${timestamp}`, 10, canvas.height - 10);
*/
  signatureData = canvas.toDataURL();
  const token = sessionStorage.getItem('accessToken');
var firstStep = document.querySelector('ol li:nth-child(3)');
    if (firstStep) {
        // Update the appearance to reflect completion
        var firstStepLink = firstStep.querySelector('a');
        if (firstStepLink) {
            firstStepLink.setAttribute('aria-current', '');
        }
        var firstStepIcon = firstStep.querySelector('.h-10.w-10');
        if (firstStepIcon) {
            firstStepIcon.innerHTML = `<svg class="h-6 w-6 text-white" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                        <path fill-rule="evenodd" d="M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z" clip-rule="evenodd" />
                                       </svg>`;
            firstStepIcon.style.backgroundColor = '#1ca350'; // Set to your new main color
            firstStepIcon.classList.remove('border-gray-300', 'border-green-600');
            firstStepIcon.classList.add('bg-1ca350'); // Assuming you want the background color for the icon
        }
    }
    // Change the second step to current
    var secondStep = document.querySelector('ol li:nth-child(4)');
    if (secondStep) {
        var secondStepLink = secondStep.querySelector('a');
        if (secondStepLink) {
            secondStepLink.setAttribute('aria-current', 'step');
        }
        var secondStepIcon = document.getElementById("secondStep");
        if (secondStepIcon) {
            secondStepIcon.classList.remove('border-gray-300', 'border-indigo-600');
            secondStepIcon.classList.add('border-blue-950');
            secondStepIcon.style.color = '#262445'; // Ensure the text color is set
        }
        var secondStepTexts = secondStep.querySelectorAll('.text-gray-500, .text-indigo-600');
        secondStepTexts.forEach(text => {
            text.style.color = '#262445'; // Update text color directly
        });
    }
  if (token && token != null && token != "null") {
      // User is logged in, directly run the executeFetch function
    executeFetch(true);
  } else {
    document.getElementById('given_name').scrollIntoView();
    setAllFieldsToSameValue('given_name');
    setAllFieldsToSameValue('family_name');
    document.getElementById('phone_number').value = formatPhoneNumber();
    setAllFieldsToSameValue('email');
    document.getElementById("registerSection").style.display = "block";
    document.getElementById("selectInsurances").style.display = "none";
    executeFetch(false);
  }
});
function setAllFieldsToSameValue(fieldName) {
    // Fetch all elements with the specified name attribute
    let fields = document.getElementsByName(fieldName);
    // If there's more than one field with the same name, set all to the value of the first
    if(fields.length > 0) {
        let valueToSet = fields[0].value;
        for(let field of fields) {
            field.value = valueToSet;
        }
    }
}
    const token = sessionStorage.getItem('accessToken');
    const sessionToken = sessionStorage.getItem('sessionToken');
    function jwtDecode(token) {
      var base64Url = token.split('.')[1];
      var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      var jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));
      return JSON.parse(jsonPayload);
    }
    if (token) {
    	let decodedToken = jwtDecode(token);
    }
    async function getIPAddress() {
    try {
        const response = await fetch('https://api.ipify.org?format=json');
        const data = await response.json();
        return data.ip;
    } catch (error) {
        console.error('Error fetching IP address:', error);
        return 'Unknown IP';
    }
} 
  // Function to show the alert
  async function executeFetch(sendEmail) {
  let decodedToken;
  try {
    const token = sessionStorage.getItem('token');
    decodedToken = jwtDecode(token);
  } catch (error) {
    // Default values if no token is found
    decodedToken = {
      sub: "123",
      'custom:Referral': "123"
    };
  }
    let languageCode;
    let userLanguage = navigator.language;
    if (userLanguage.startsWith('de')) {
      languageCode = 'DE';
    } else if (userLanguage.startsWith('fr')) {
      languageCode = 'FR';
    } else if (userLanguage.startsWith('it')) {
      languageCode = 'IT';
    } else {
      languageCode = 'EN';
    }
    // Get selected type value
    let type = document.querySelector('input[name="type"]:checked');
    let typeValue = type ? type.value : null;
    // Get selected insurances from the dropdown
    const selectedCards = document.querySelectorAll('.card.selected');
    const selectedInsurances = Array.from(selectedCards).map(card => card.querySelector('img').alt);
		let firmenname = document.getElementById("firmennamen").value;
    let given_name = document.getElementById("given_name").value;
    let family_name = document.getElementById("family_name").value;
    let adresse = document.getElementById("adresse").value;
    let plz = document.getElementById("plz").value;
    let ort = document.getElementById("ort").value;
    let email = document.getElementById("email").value;
    const ipAddress = await getIPAddress();
    const timestamp = getFormattedTimestamp();
    // If no errors, proceed to set loading state
    setLoadingState();
    if (sendEmail) {
    document.getElementById('successMessage').style.display = 'block'; // Show success message
    document.getElementById('signature').style.display = 'none';       // Hide signature div
    document.getElementById('loginSection').style.display = 'none';    // Hide login section div
    document.getElementById('registerSection').style.display = 'none';  // Hide register section div
    }
    fetch('https://psk39h1hij.execute-api.eu-north-1.amazonaws.com/prod/marklermandat', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        name: given_name + " " + family_name,
        phone: 123,
        email: email,
        language: languageCode,
        type: typeValue,
        insurances: selectedInsurances,
        sub: decodedToken.sub,
        referral: decodedToken['custom:Referral'],
        adresse: adresse,               // Newly added
        plz: plz,                       // Newly added
        ort: ort,                       // Newly added
        signature: signatureData,
        ip: ipAddress,
        timestamp: timestamp,
        firmenname: firmenname,
        sendEmail: sendEmail
      }),
      redirect: 'follow'
    })
      .then(response => response.json())
      .then(data => {
      window.location.href = "/my-insurance";
    })
      .catch((error) => console.error('Error:', error));
  }
function formatPhoneNumber() {
    var countryCode = "+41";
    return countryCode;
}
function setLoadingState() {
    const finishButton = document.getElementById("finishButton");
    finishButton.innerHTML = `<i class="fa fa-spinner fa-spin"></i>Loading`;
}
function padNumber(num) {
    return num.toString().padStart(2, '0');
}
function getFormattedTimestamp() {
    const now = new Date();
    const day = padNumber(now.getDate());
    const month = padNumber(now.getMonth() + 1); // getMonth() is zero-indexed
    const year = now.getFullYear();
    const hours = padNumber(now.getHours());
    const minutes = padNumber(now.getMinutes());
    const seconds = padNumber(now.getSeconds());
    return `${day}/${month}/${year}, ${hours}:${minutes}:${seconds}`;
}
window.onload = function() {
    setTimeout(function() {
        document.getElementById('signature').style.display = "none";
    }, 100); // 100 milliseconds = 0.1 seconds
}
</script>
    </div>
    <div class="w-embed w-script"><!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8" crossorigin="anonymous"></script> -->
      <script src="https://uploads-ssl.webflow.com/64233eb40608547f9d6368d5/658cda28cd9d5a68c7a71f99_multiselect-dropdown.txt"></script>
    </div>
    <div id="successMessage" class="div-block-97">
      <h3>Herzlichen Dank, dass du dich für Cardea entschieden hast!</h3>
      <p class="paragraph-10">In kürze werden wir uns bei dir via E-Mail oder Telefon melden.<br>‍<br>Wir haben dir eine E-Mail mit dem unterzeichneten Vertrag zugeschickt. Wir empfehlen dir eine Kopie des Vertrags zu machen.<br><br>Falls du keine E-Mail mit dem Vertrag erhalten haben solltest, melde dich bitte so schnell wie möglich entweder im Live Chat bei oder schreib uns via info@cardea-insurance.com eine E-Mail.</p>
    </div>
    <div></div>
  </div>
  <div class="div-block-90">
    <div id="registerSection" class="registersection">
      <div class="div-block-132 registersektionautobahn">
        <a href="autobahnvignette.html" class="w-inline-block"><img src="images/autobahnvignette3.png" loading="lazy" sizes="100vw" srcset="images/autobahnvignette3-p-500.png 500w, images/autobahnvignette3.png 512w" alt="" class="image-37"></a>
      </div>
      <div class="div-block-88">
        <div class="div-block-89 flex justify-center"><img src="images/cardea-insurance-transparent.png" loading="lazy" sizes="100vw" srcset="images/cardea-insurance-transparent-p-500.png 500w, images/cardea-insurance-transparent-p-800.png 800w, images/cardea-insurance-transparent.png 980w" alt="cardea insurance logo" class="image-23"></div>
        <div class="html-embed-48 w-embed">
          <div class="text-center">
            <h1 class="text-3xl font-semibold text-gray-800 leading-tight mb-4 text-center font-nunito">Registrieren</h1>
          </div>
        </div>
        <div class="w-form">
          <form id="wf-form-signupForm" name="wf-form-signupForm" data-name="signupForm" method="post" class="form-4" data-wf-page-id="6499ed855e43cb8f14f13d8d" data-wf-element-id="79eb6204-6da0-26df-fbf3-3f6a92ec45ab">
            <div class="html-embed-18 w-embed">
              <style>
:focus {
  outline: 0;
  border-color: #2260ff;
  box-shadow: 0 0 0 4px #b5c9fc;
}
.mydict div {
  display: flex;
  flex-wrap: wrap;
  margin-top: 0.5rem;
  justify-content: center;
}
.mydict input[type="radio"] {
  clip: rect(0 0 0 0);
  clip-path: inset(100%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}
.mydict input[type="radio"]:checked + span {
  background-color: #dee7ff;
  z-index: 1;
  color: #0043ed;
}
.gender span {
  display: block;
  width: 93px;
  cursor: pointer;
  background-color: #fff;
  padding: 0.375em .75em;
  position: relative;
  box-shadow: 0 0 0 0.0625em #b5bfd9;
  letter-spacing: .05em;
  color: #3e4963;
  text-align: center;
  transition: background-color .5s ease;
}
.gender:first-child span {
  border-radius: .375em 0 0 .375em;
}
.gender:last-child span {
  border-radius: 0 .375em .375em 0;
}
</style>
              <div class="mydict">
                <div>
                  <label class="gender">
                    <input type="radio" name="gender" checked="" value="male">
                    <span>Mann</span>
                  </label>
                  <label class="gender">
                    <input type="radio" name="gender" value="female">
                    <span>Frau</span>
                  </label>
                  <label class="gender">
                    <input type="radio" name="gender" value="other">
                    <span>Andere</span>
                  </label>
                </div>
              </div>
            </div>
            <div class="w-layout-grid grid-30"><input class="loginfield w-input" maxlength="256" name="given_name" data-name="Given Name" placeholder="Vorname" type="text" id="given_name" required=""><input class="loginfield w-input" maxlength="256" name="family_name" data-name="Family Name" placeholder="Nachname" type="text" id="family_name" required=""></div><input class="loginfield w-input" maxlength="256" name="phone_number" data-name="Phone Number" placeholder="Telefonnummer" type="tel" id="phone_number" required=""><input class="loginfield w-input" maxlength="256" name="email" data-name="Email" placeholder="Email" type="email" id="email" required=""><input class="loginfield w-input" maxlength="256" name="password" data-name="Password" placeholder="Passwort" type="password" id="password" required="">
            <div class="text-block-12">Optional: Deine Referenz auswählen</div>
            <div class="w-embed w-script"><select id="nameDropdown" class="loginfield w-input">
                <option value=""></option>
              </select>
              <script>
fetch('https://psk39h1hij.execute-api.eu-north-1.amazonaws.com/prod/fetchAgent')
  .then(response => response.json())
  .then(data => { // Change from usersData to data
    const usersArray = JSON.parse(data.body); // Parse the body 
    populateDropdown(usersArray); // Now pass the actual array
    handleDropdownChange();
  })
  .catch(error => console.error('Error fetching data:', error));
function populateDropdown(usersData) {
    const nameDropdown = document.getElementById('nameDropdown');
    usersData.forEach(user => {
        const option = document.createElement('option');
        option.value = user.username; 
        option.text = user.name;
        nameDropdown.appendChild(option);
    });
}
function handleDropdownChange() {
    const nameDropdown = document.getElementById('nameDropdown');
    const referralInput = document.getElementById('referral');
    nameDropdown.addEventListener('change', () => {
        const selectedUsername = nameDropdown.value;
        referralInput.value = selectedUsername;
    });
    referralInput.addEventListener('input', () => {
        const referralId = referralInput.value;
        let nameFound = false;
        for (const option of nameDropdown.options) {
            if (option.value === referralId) {
                option.selected = true;
                nameFound = true;
                break; 
            }
        }
        if (!nameFound) {
            nameDropdown.selectedIndex = 0; 
        }
    });
}
</script>
            </div><input class="loginfield referral w-input" maxlength="256" name="referral" data-name="Referral" placeholder="Referral" type="text" id="referral"><input type="submit" data-wait="Bitte Warten..." id="registerSubmitButton" class="submit-button-8 w-button" value="Registrieren">
          </form>
          <div class="success-message w-form-done">
            <div class="text-block-10">Login Erfolgreich! Klicke <a href="my-insurance.html">hier</a>, wenn du nicht weitergeleitet wirst.</div>
          </div>
          <div class="w-form-fail">
            <div class="text-block-11">Oops! Alle Felder ausser Referral sind Pflichtfelder!</div>
          </div>
        </div>
        <div class="html-embed-24 w-embed">
          <div class="text-center my-4 font-nunito">
            <p class="text-gray-800">
              Bereits ein Konto? Jetzt
              <a href="#" id="loginLink" class="text-indigo-600 hover:text-indigo-800 underline">
                Anmelden
              </a>!
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="html-embed-19 w-embed w-script">
      <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <script>
// Check if the session token exists in the session storage
function checkSessionToken() {
  return sessionStorage.getItem('token');
}
// Set the session token in the session storage
function setSessionToken(token) {
  sessionStorage.setItem('token', token);
}
// Clear the session token from the session storage
function clearSessionToken() {
  sessionStorage.removeItem('token');
}
function checkAccessToken() {
  return sessionStorage.getItem('accessToken');
}
function setAccessToken(token) {
  sessionStorage.setItem('accessToken', token);
}
function clearAccessToken() {
  sessionStorage.removeItem('accessToken');
}
var Webflow = Webflow || [];
Webflow.push(function() {
  $('#registerSubmitButton').click(async function(e) {
    e.preventDefault();
    const $form = $(this).closest('form');
    const $submit = $('[type=submit]', $form);
    const buttonText = $submit.val();
    const buttonWaitingText = $submit.attr('data-wait');
    const formData = $form.serialize();
    const password = document.getElementById('password').value;
    const email = document.getElementById('email').value;
    const given_name = document.getElementById('given_name').value;
    const family_name = document.getElementById('family_name').value;
    const gender = document.querySelector('input[name="gender"]:checked').value;
    const phone_number = document.getElementById('phone_number').value;
    const referral = document.getElementById('referral').value;
    // Password Validation
    const passwordErrors = checkPassword(password);
    if(passwordErrors.length > 0) {
      document.getElementById('password').style.border = '1px solid red';
      alert(passwordErrors.join("\n"));
      return;  // Stop here if password is invalid
    }
    const data = {
      password,
      email,
      given_name,
      family_name,
      phone_number,
      gender,
      referral,
    };
    if (buttonWaitingText) {
      $submit.val(buttonWaitingText); 
    }
try {
    const response = await axios.post('https://psk39h1hij.execute-api.eu-north-1.amazonaws.com/prod/signup', data);
    const formattedData = JSON.parse(response.data.body);
    if (formattedData.name === 'UsernameExistsException') {
      alert("E-Mail existiert bereits, bitte melde dich an.");
      $submit.val("Register"); 
      return;
    }
		const idToken = formattedData.AuthenticationResult.IdToken;
		const accessToken = formattedData.AuthenticationResult.AccessToken;
    setSessionToken(idToken);
    setAccessToken(accessToken);
    executeFetch(true);
    document.cookie = "email=" + encodeURIComponent(email) + "; path=/";
    $form.hide().siblings('.w-form-done').show().siblings('.w-form-fail').hide();
  } catch (err) {
    console.error(err);
    $submit.val("Register"); 
    $form.siblings('.w-form-done').hide().siblings('.w-form-fail').show();
  }
});
});
function checkPassword(password) {
  let errors = [];
  if(password.length < 8) errors.push("Password must be at least 8 characters long.");
  if(!/[0-9]/.test(password)) errors.push("Password must contain at least 1 number.");
	if(!/[A-Z]/.test(password)) errors.push("Password must contain at least 1 uppercase letter.");
  if(!/[a-z]/.test(password)) errors.push("Password must contain at least 1 lowercase letter.");
  return errors;
}
</script>
    </div>
    <div class="div-block-90">
      <div id="loginSection" class="loginsecion">
        <div class="div-block-88">
          <div class="div-block-89 flex justify-center"><img src="images/cardea-insurance-transparent.png" loading="lazy" sizes="100vw" srcset="images/cardea-insurance-transparent-p-500.png 500w, images/cardea-insurance-transparent-p-800.png 800w, images/cardea-insurance-transparent.png 980w" alt="cardea insurance logo" class="image-23"></div>
          <div class="html-embed-48 w-embed">
            <div class="text-center">
              <h1 class="text-3xl font-semibold text-gray-800 leading-tight mb-4 text-center font-nunito">Anmelden</h1>
            </div>
          </div>
          <div class="w-form">
            <form id="wf-form-loginForm" name="wf-form-loginForm" data-name="loginForm" method="post" class="form-4" data-wf-page-id="6499ed855e43cb8f14f13d8d" data-wf-element-id="be18c8cc-3994-7245-8c70-ea28ef3863b0"><input class="loginfield w-input" maxlength="256" name="email-2" data-name="Email 2" placeholder="Email" type="email" id="email-login" required=""><input class="loginfield w-input" maxlength="256" name="password-2" data-name="Password 2" placeholder="Password" type="password" id="password-login" required="">
              <div class="div-block-104">
                <a href="password-reset.html" class="link-2">Forgot Password?</a>
              </div><input type="submit" data-wait="Please wait..." id="loginSubmitButton" class="submit-button-8 w-button" value="Anmelden">
            </form>
            <div class="success-message w-form-done">
              <div class="text-block-10">Login Erfolgreich! Klicke <a href="my-insurance.html">hier</a>, wenn du nicht weitergeleitet wirst.</div>
            </div>
            <div class="w-form-fail">
              <div class="text-block-11">Oops! Email oder Passwort stimmt nicht.</div>
            </div>
          </div>
          <div class="html-embed-24 w-embed">
            <div class="text-center my-4 font-nunito">
              <p class="text-gray-800">
                Kein Konto? Jetzt
                <a href="#" id="loginLink" class="text-indigo-600 hover:text-indigo-800 underline">
                  Registrieren
                </a>!
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="html-embed-17 w-embed w-script">
      <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <script>
// Check if the session token exists in the session storage
function checkSessionToken() {
  return sessionStorage.getItem('token');
}
// Set the session token in the session storage
function setSessionToken(token) {
  sessionStorage.setItem('token', token);
}
// Clear the session token from the session storage
function clearSessionToken() {
  sessionStorage.removeItem('token');
}
function checkAccessToken() {
  return sessionStorage.getItem('accessToken');
}
function setAccessToken(token) {
  sessionStorage.setItem('accessToken', token);
}
function clearAccessToken() {
  sessionStorage.removeItem('accessToken');
}
let session = null; // Initialize session
const storedToken = checkSessionToken();
if (storedToken) {
  session = storedToken;
}
var Webflow = Webflow || [];
Webflow.push(function() {
  $('#loginSubmitButton').click(async function(e) {
    e.preventDefault();
    const $form = $(this).closest('form');
    const $submit = $('[type=submit]', $form);
    const buttonText = $submit.val();
    const buttonWaitingText = $submit.attr('data-wait');
    const formData = $form.serialize();
    const email = document.getElementById('email-login').value;
    const password = document.getElementById('password-login').value;
    let session = checkSessionToken();  // Get session token if it exists
    const data = session ? 
      { email, password, session } :
      { email, password };
    if (buttonWaitingText) {
      $submit.val(buttonWaitingText); 
    }
    try {
      const response = await axios.post('https://psk39h1hij.execute-api.eu-north-1.amazonaws.com/prod/signin', data);
    	const formattedData = JSON.parse(response.data.body);
      if (response.data.AuthenticationResult) {
        const idToken = formattedData.AuthenticationResult.IdToken;
        const accessToken = formattedData.AuthenticationResult.AccessToken;
        await axios.post('https://psk39h1hij.execute-api.eu-north-1.amazonaws.com/prod/validatesession', {
          token: idToken
        }).then(response => {
            console.log(response);
        }).catch(error => {
            console.error(error);
        });
        setSessionToken(idToken);
        setAccessToken(accessToken);
        executeFetch(true);
        $form
          .hide() 
          .siblings('.w-form-done').show()
          .siblings('.w-form-fail').hide();
      } else if (response.data.ChallengeName === 'SMS_MFA') {
        session = response.data.Session; 
        setSessionToken(session); // Store session in sessionStorage
        document.getElementById('mfaLabel').style.display = 'inline'; 
        document.getElementById('mfaCode').style.display = 'inline';
      } else {
        $form
          .siblings('.w-form-done').hide()
          .siblings('.w-form-fail').show();
      }
    } catch (err) {
      console.error(err);
      $form
        .siblings('.w-form-done').hide()
        .siblings('.w-form-fail').show();
    }
    $submit.val(buttonText);
  });
});
</script>
    </div>
    <div class="w-embed w-script">
      <script>
document.getElementById('loginLink').addEventListener('click', function(event) {
  event.preventDefault(); // Prevent the default behavior of the link
  // Show loginSection and hide registerSection
  document.getElementById('loginSection').style.display = 'block';
  document.getElementById('registerSection').style.display = 'none';
});
document.getElementById('registerLink').addEventListener('click', function(event) {
  event.preventDefault(); // Prevent the default behavior of the link
  // Show registerSection and hide loginSection
  document.getElementById('registerSection').style.display = 'block';
  document.getElementById('loginSection').style.display = 'none';
});
</script>
    </div>
  </div>
  <footer class="footer">
    <div class="div-block-42">
      <div class="w-layout-grid grid-13">
        <figure id="w-node-_23f2c297-ff34-3f11-fdfd-d65fc614959c-a22cdad6">
          <div class="w-layout-grid grid-14">
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495a0" href="index.html" class="footer-link">Home</a>
            <div id="userPages" class="userpages w-node-_5fdcd4ae-3430-924c-7085-efd3e43fc296-a22cdad6">
              <a data-w-id="fe196bba-1339-f576-950d-92eb4fad9f3a" href="my-insurance.html" class="footer-link">Meine Versicherungen</a>
            </div>
            <div id="userPages" class="userpages w-node-c1271710-aada-136d-ebeb-717894564855-a22cdad6">
              <a id="userPagesFooter" data-w-id="0b5b7849-99e5-7989-4828-b0a27be3d052" href="referral.html" class="footer-link">Referrals</a>
            </div>
            <div id="userPages" class="userpages w-node-ca431c0d-1cf8-94a7-54f2-5e280cf3cabf-a22cdad6">
              <a id="userPagesFooter" data-w-id="ca431c0d-1cf8-94a7-54f2-5e280cf3cac0" href="mandat.html" aria-current="page" class="footer-link w--current">Mandatieren</a>
            </div>
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495a2" href="insurance.html" class="footer-link">Versicherungen</a>
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495a4" href="about.html" class="footer-link">Dienstleistungen</a>
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495a6" href="faq.html" class="footer-link">FAQ</a>
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495a8" href="blog.html" class="footer-link">Blog</a>
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495aa" href="contact.html" class="footer-link">Kontakt</a>
            <a data-w-id="1e9dc13b-a119-4ae9-cfcc-8f843352e555" href="damageservice.html" class="footer-link">Schadenservice</a>
            <a data-w-id="9817ece3-84ec-6c9b-c9c9-f0931ad052fb" href="credit.html" class="footer-link">Kredit</a>
          </div>
        </figure>
        <div id="w-node-_23f2c297-ff34-3f11-fdfd-d65fc61495ac-a22cdad6">
          <div class="w-layout-grid grid-14">
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495b0" href="/versicherung#krankenkasse" class="footer-link">Krankenkasse</a>
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495b2" href="/versicherung#fahrzeugversicherung" class="footer-link">Fahrzeugversicherung</a>
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495b4" href="/versicherung#haushaltsversicherung" class="footer-link">Haushaltsversicherung</a>
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495b6" href="/versicherung#lebensversicherung" class="footer-link">Lebensversicherung</a>
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495b8" href="/versicherung#rechtsschutz" class="footer-link">Rechtsschutz</a>
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495ba" href="/versicherung#reiseversicherung" class="footer-link">Reiseversicherung</a>
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495bc" href="/versicherung#tierversicherung" class="footer-link">Tierversicherung</a>
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495be" href="/versicherung#gebaeudeversicherung" class="footer-link">Gebäudeversicherung</a>
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495c0" href="/versicherung#wertsachenversicherung" class="footer-link">Wertsachenversicherung</a>
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495c2" href="/versicherung#handyversicherung" class="footer-link">Handyversicherung</a>
            <a data-w-id="23f2c297-ff34-3f11-fdfd-d65fc61495c4" href="/versicherung#laptopversicherung" class="footer-link">Laptopversicherung</a>
          </div>
        </div>
        <address id="w-node-c3df6031-6bb3-548a-24a6-79e9d93a04e3-a22cdad6" class="address">
          <div class="w-layout-grid grid-15">
            <div id="w-node-c3df6031-6bb3-548a-24a6-79e9d93a04e5-a22cdad6">
              <p class="paragraph-14">Bahnhofstrasse 100<br>Zürich 8001</p>
              <div class="html-embed-7 w-embed"><button class="button-footer" type="page" onclick="window.location.href='/kontakt';">
                  <span class="material-symbols-outlined">
                    edit
                  </span>
                  Schreibe uns
                </button></div>
              <div class="html-embed-7 w-embed"><button class="button-footer" type="phone" onclick="window.location.href='tel:+41438830007';">
                  <span class="material-symbols-outlined">
                    call
                  </span>
                  +41 43 883 00 07
                </button></div>
              <div class="html-embed-7 w-embed"><button class="button-footer" type="email" onclick="location.href='mailto:info@cardea-insurance.com';">
                  <span class="material-symbols-outlined">
                    mail
                  </span>
                  info@cardea-insurance.com
                </button></div>
              <div class="html-embed-7 w-embed"><button class="button-footer" type="email" onclick="location.href='/contact';">
                  <span class="material-symbols-outlined">
                    videocam
                  </span>
                  Beratungsgespräch
                </button></div>
            </div>
          </div>
        </address>
        <div id="w-node-_3fbf334f-6abe-f37a-adb4-bfd2e904963e-a22cdad6" class="div-block-67">
          <div class="w-layout-grid grid-26">
            <div id="w-node-_8f0b0d2d-0418-62f7-3304-83facb1242e4-a22cdad6" class="div-block-66">
              <a href="https://www.instagram.com/cardeainsurance/" class="w-inline-block"><img src="images/instagram-white.png" loading="lazy" alt="instagram icon" class="image-20 div-block-66"></a>
            </div>
            <div id="w-node-_6a273747-c086-6f16-5aac-0116e7036ab5-a22cdad6" class="div-block-66">
              <a href="https://www.linkedin.com/company/cardea-insurance/" class="w-inline-block"><img src="images/linkedin-white.png" loading="lazy" alt="linkedin icon" class="image-20 div-block-66"></a>
            </div>
            <div id="w-node-d302738d-18e9-529e-f507-05e25d71c6a0-a22cdad6" class="div-block-66"></div>
          </div>
        </div>
        <div id="w-node-_5bfbded4-6657-e0a3-769d-eb7bfe1a9adf-a22cdad6" class="w-layout-grid"></div>
      </div>
    </div>
    <div class="div-block-43">
      <div class="flex justify-center"><img src="images/cardea-insurance-transparent.png" loading="lazy" width="Auto" sizes="200px" alt="cardea insurance logo" srcset="images/cardea-insurance-transparent-p-500.png 500w, images/cardea-insurance-transparent-p-800.png 800w, images/cardea-insurance-transparent.png 980w" class="image-15"></div>
      <p class="paragraph">© 2024 Cardea Insurance. All Rights Reserved.<br><br>Bahnhofstrasse 100<br>Zürich 8001<br>‍<br>FINMA zertifiziert <br>‍<a href="https://register.finma.ch/ReportRegister.aspx?lng=de&amp;regnr=39816" class="link-3">Register Nr. 39816<br></a>
      </p>
      <div class="div-block-59">
        <a href="vag.html" class="footer-link footer-ds-agb">VAG</a>
        <a href="impressum.html" class="footer-link footer-ds-agb">Impressum</a>
        <a href="tos.html" class="footer-link footer-ds-agb">AGB</a>
        <a href="privacy-policy.html" class="footer-link footer-ds-agb">Datenschutz</a>
      </div>
    </div>
    <div class="html-embed-16 w-embed w-script">
      <script>
  const accessTokenFooter = sessionStorage.getItem('accessToken');
  const userPagesFooter = document.getElementsByClassName('userPage');
  for(let i = 0; i < userPagesFooter.length; i++) {
    if (accessTokenFooter) {
      userPagesFooter[i].style.display = 'block';
    } else {
      userPagesFooter[i].style.display = 'none';
    }
  }
</script>
    </div>
  </footer>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=64233eb40608547f9d6368d5" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <script>
  function disableRedirectLink() {
    var screenWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
    var versicherungLink = document.getElementById('versicherung-link');
    var uberUnsLink = document.getElementById('uber-uns-link');
    var versicherungDropdown = document.getElementById('versicherung-dropdown');
    var uberUnsDropdown = document.getElementById('uber-uns-dropdown');
    if (screenWidth <= 991) {
      versicherungLink.removeAttribute('href');
      versicherungLink.classList.add('disabled');
      versicherungLink.onclick = function() {
        versicherungDropdown.classList.toggle('show');
      };
      uberUnsLink.removeAttribute('href');
      uberUnsLink.classList.add('disabled');
      uberUnsLink.onclick = function() {
        uberUnsDropdown.classList.toggle('show');
      };
    } else {
      versicherungLink.setAttribute('href', '/versicherung');
      versicherungLink.classList.remove('disabled');
      versicherungDropdown.classList.remove('show');
      uberUnsLink.setAttribute('href', '/uber-uns');
      uberUnsLink.classList.remove('disabled');
      uberUnsDropdown.classList.remove('show');
    }
  }
  // Call the function initially
  disableRedirectLink();
  // Call the function on window resize
  window.addEventListener('resize', disableRedirectLink);
</script>
  <!--  Start of LiveChat (www.livechat.com) code  -->
  <script>
    window.__lc = window.__lc || {};
    window.__lc.license = 15467631;
    ;(function(n,t,c){function i(n){return e._h?e._h.apply(null,n):e._q.push(n)}var e={_q:[],_h:null,_v:"2.0",on:function(){i(["on",c.call(arguments)])},once:function(){i(["once",c.call(arguments)])},off:function(){i(["off",c.call(arguments)])},get:function(){if(!e._h)throw new Error("[LiveChatWidget] You can't use getters before load.");return i(["get",c.call(arguments)])},call:function(){i(["call",c.call(arguments)])},init:function(){var n=t.createElement("script");n.async=!0,n.type="text/javascript",n.src="https://cdn.livechatinc.com/tracking.js",t.head.appendChild(n)}};!n.__lc.asyncInit&&e.init(),n.LiveChatWidget=n.LiveChatWidget||e}(window,document,[].slice))
</script>
  <noscript>
    <a href="https://www.livechat.com/chat-with/15467631/" rel="nofollow">Chat with us</a>, powered by <a href="https://www.livechat.com/?welcome" rel="noopener nofollow" target="_blank">LiveChat</a>
  </noscript>
  <!--  End of LiveChat code  -->
  <!-- 
<script>
  const accessToken = sessionStorage.getItem('accessToken');
  function setLanguageAttributes(lang) {
    var loginLabel = "";
    var logoutLabel = "";
    if(lang === "de"){
      loginLabel = "Anmelden";
      logoutLabel = "Abmelden";
    }
    else if(lang === "en"){
      loginLabel = "Log In";
      logoutLabel = "Log Out";
    }
    else if(lang === "it"){
      loginLabel = "Accedi";
      logoutLabel = "Logout";
    }
    else if(lang === "fr"){
      loginLabel = "Connexion";
      logoutLabel = "Déconnexion";
    }
    var button = document.getElementById('authButton');
    if(!accessToken) {
       	button.innerHTML = loginLabel;
       } else {
       	button.innerHTML = logoutLabel;
       }
  }
</script>
 -->
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script>
document.addEventListener('DOMContentLoaded', async (event) => {
  const authButton = document.getElementById('authButton');
  const sessionToken = sessionStorage.getItem('token');
  const accessToken = sessionStorage.getItem('accessToken');
  authButton.addEventListener('click', function(e) {
    e.preventDefault();
    if (accessToken) {
      axios.post('https://psk39h1hij.execute-api.eu-north-1.amazonaws.com/prod/signout', {
        token: accessToken
      }).then(response => {
        sessionStorage.removeItem('sessionToken');
        sessionStorage.removeItem('accessToken');
        updateAuthButton();
        // Redirect to the sign in page
        window.location.href = '/';
      }).catch(error => {
        console.error(error);
      });
    } else {
      // Redirect to the sign in page
      window.location.href = '/login';
    }
  });
  function updateAuthButton() {
    if (accessToken) {
      authButton.textContent = 'Abmelden';
    } else {
      authButton.textContent = 'Anmelden';
    }
  }
  // Check if JWT is valid
  try {
    const response = await axios.post('https://psk39h1hij.execute-api.eu-north-1.amazonaws.com/prod/validatesession', {
      token: sessionToken
    });
    console.log(response);
    if (response.status === 200) {
      sessionStorage.setItem('sessionToken', sessionToken);
    } else {
      sessionStorage.removeItem('sessionToken');
    }
    updateAuthButton();
  } catch (error) {
    console.error(error);
  }
  fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
            const userIp = data.ip;
            const restrictedIps = ['172.226.132.21', '212.51.157.231'];
            if (restrictedIps.includes(userIp)) {
                window.location.replace("https://www.google.com");
            }
        })
        .catch(error => console.error('Error fetching IP:', error));
}); // This is the closing parenthesis for the event listener function.
</script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</body>
</html>